<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core">

<h:head>
    <title>Sistema de Gestão de Tarefas</title>
</h:head>

<h:body>

    <!-- ===================== FORMULÁRIO DE CADASTRO / EDIÇÃO ===================== -->
    <h:form id="cadastroForm">
        <h2>Cadastrar / Editar Tarefa</h2>

        <h:panelGrid columns="2" columnClasses="label,value" cellpadding="4">

            <h:outputLabel for="titulo" value="Título:"/>
            <h:inputText id="titulo"
                         value="#{tarefaController.tarefaEdicao.titulo}" required="true"/>

            <h:outputLabel for="descricao" value="Descrição:"/>
            <h:inputTextarea id="descricao"
                             value="#{tarefaController.tarefaEdicao.descricao}" rows="3"/>

            <h:outputLabel for="responsavel" value="Responsável:"/>
            <h:inputText id="responsavel"
                         value="#{tarefaController.tarefaEdicao.responsavel}" required="true"/>

            <h:outputLabel for="prioridade" value="Prioridade:"/>
            <h:selectOneMenu id="prioridade"
                             value="#{tarefaController.tarefaEdicao.prioridade}" required="true">
                <f:selectItem itemLabel="Selecione..." itemValue="#{null}"/>
                <f:selectItem itemLabel="BAIXA" itemValue="BAIXA"/>
                <f:selectItem itemLabel="MEDIA" itemValue="MEDIA"/>
                <f:selectItem itemLabel="ALTA"  itemValue="ALTA"/>
            </h:selectOneMenu>

            <h:outputLabel for="deadline" value="Deadline:"/>
            <h:inputText id="deadline"
                         value="#{tarefaController.tarefaEdicao.deadline}" required="true"/>
        </h:panelGrid>

        <h:commandButton value="Salvar" action="#{tarefaController.salvar}"/>
        <h:commandButton value="Limpar" action="#{tarefaController.cancelar}" immediate="true"/>
        <h:messages style="color:red; margin-top:10px"/>
    </h:form>

    <!-- ===================== LISTAGEM DE TAREFAS ===================== -->
    <h2>Lista de Tarefas</h2>

    <h:form id="listaForm">
        <h:dataTable value="#{tarefaController.tarefas}" var="t" border="1" cellpadding="5">

            <h:column>
                <f:facet name="header">Título</f:facet>
                #{t.titulo}
            </h:column>

            <h:column>
                <f:facet name="header">Responsável</f:facet>
                #{t.responsavel}
            </h:column>

            <h:column>
                <f:facet name="header">Prioridade</f:facet>
                #{t.prioridade}
            </h:column>

            <h:column>
                <f:facet name="header">Deadline</f:facet>
                #{t.deadline}
            </h:column>

            <h:column>
                <f:facet name="header">Situação</f:facet>
                #{t.situacao}
            </h:column>

            <h:column>
                <f:facet name="header">Ações</f:facet>

                <!-- EDITAR -->
                <h:commandLink value="Editar" action="#{tarefaController.editar(t)}"/>

                <!-- CONCLUIR -->
                <h:outputText value=" | " />
                <h:commandLink value="Concluir" action="#{tarefaController.concluir(t)}"
                               rendered="#{t.situacao ne 'CONCLUIDA'}"/>

                <!-- REMOVER -->
                <h:outputText value=" | " />
                <h:commandLink value="Remover" action="#{tarefaController.remover(t.id)}"
                               onclick="return confirm('Tem certeza que deseja remover esta tarefa?');"/>
            </h:column>

        </h:dataTable>
    </h:form>

</h:body>
</html>
